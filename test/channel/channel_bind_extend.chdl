#########################################################3
# Design
#########################################################3
class cell1 extends Module
  constructor: ->
    super()
    #@setBlackBox()
    Port(
      din: input(16)
      dout: output(16)
      bus:
        addr: input(16)
        data: output(16)
    )

  build: ->

class cell2 extends Module
  u0_cell1: new cell1()
  constructor: ->
    super()
    Port(
      bundle:
        din: bind('c_din')
        dout: bind('c_dout')
      ext: bind('ext_ch')
    )

    Channel(
      c_din: channel()
      c_dout: channel()
      ext_ch: channel()
    )

    @u0_cell1.bind(
      din: @c_din
      dout: @c_dout
      bus: @ext_ch
    )

  build: ->


class ChannelBindExtend extends Module
  u0_cell2: new cell2()

  constructor: ->
    super()

    Port(
      top_port: bind('ch1')
    )

    Channel(
      ch1: channel()
      ch2: channel()
      )

    @u0_cell2.bind(
      bundle: @ch1
      ext: @ch2
    )

  build: ->
    Net(a,16)=@ch2.Port.data
    assign @ch2.Port.addr = 0

module.exports=ChannelBindExtend

